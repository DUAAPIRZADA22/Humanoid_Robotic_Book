# =================================================================
# BACKEND (Flask/FastAPI) Environment Variables
# Physical AI & Humanoid Robotics Book Chatbot
# =================================================================
# Copy this file to .env.backend.local and fill in your actual values
# Never commit .env.backend.local to version control!

# =================================================================
# AI SERVICES CONFIGURATION
# =================================================================

# Cohere AI API key for embeddings and reranking (REQUIRED for AI features)
# Get from: https://cohere.com/
COHERE_API_KEY=kD9oItFNSTO1IVeJWsAFkTYnM407xEwSmLoPzUBE
COHERE_BASE_URL=https://api.cohere.ai/v1
COHERE_TIMEOUT=30
COHERE_MAX_RETRIES=3

# Alternative AI services
# OpenAI API key (alternative to Cohere)
# OPENAI_API_KEY=your_openai_api_key_here
# OPENAI_BASE_URL=https://api.openai.com/v1
# OPENAI_MODEL=gpt-4-turbo-preview
# OPENAI_TEMPERATURE=0.7

# Anthropic Claude API (alternative)
# ANTHROPIC_API_KEY=your_anthropic_api_key_here
# ANTHROPIC_MODEL=claude-3-sonnet-20240229

# Azure OpenAI (if using Azure)
# AZURE_OPENAI_ENDPOINT=https://your-resource.openai.azure.com/
# AZURE_OPENAI_API_KEY=your_azure_openai_key
# AZURE_OPENAI_API_VERSION=2024-02-15-preview
# AZURE_DEPLOYMENT_NAME=gpt-4-turbo

# =================================================================
# VECTOR DATABASE CONFIGURATION
# =================================================================

# Qdrant vector database configuration
# Option 1: Local Qdrant (default)
QDRANT_HOST=localhost
QDRANT_PORT=6333
QDRANT_URL=https://6740646f-3e31-418e-a10b-225c3324c6ca.europe-west3-0.gcp.cloud.qdrant.io

# Option 2: Qdrant Cloud (recommended for production)
# Example: https://your-cluster-name.cloud.qdrant.io
# QDRANT_URL=https://your-cluster-name.cloud.qdrant.io
# QDRANT_API_KEY=your_qdrant_cloud_api_key_here
# QDRANT_TIMEOUT=30

# Qdrant authentication (required for cloud)
QDRANT_API_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2Nlc3MiOiJtIn0.WhDR9GrhjMx1-oxdFjfuwkgANkR7DlIKeT058X1jYFo

# Qdrant collection settings
QDRANT_COLLECTION_NAME=humanoid_robotics_book
QDRANT_VECTOR_SIZE=1024
QDRANT_DISTANCE_METRIC=cosine
QDRANT_ON_DISK=true

# Qdrant performance settings
QDRANT_HNSW_M=16
QDRANT_HNSW_EF_CONSTRUCT=100
QDRANT_SEARCH_LIMIT=10

# Alternative vector databases (commented out)
# Pinecone vector database
# PINECONE_API_KEY=your_pinecone_api_key
# PINECONE_ENVIRONMENT=your_pinecone_environment
# PINECONE_INDEX_NAME=book-content

# Weaviate vector database
# WEAVIATE_URL=http://localhost:8080
# WEAVIATE_API_KEY=your_weaviate_api_key
# WEAVIATE_CLASS_NAME=BookContent

# =================================================================
# APPLICATION CONFIGURATION
# =================================================================

# Application metadata
APP_NAME=Physical AI & Humanoid Robotics Book Chatbot
APP_VERSION=1.0.0
APP_DESCRIPTION=AI-powered chatbot for Physical AI and Humanoid Robotics content

# Debug and development settings
DEBUG=false
FLASK_ENV=production
TESTING=false

# Server configuration
HOST=0.0.0.0
PORT=7860

# Python runtime settings
PYTHONUNBUFFERED=1
PYTHONDWRITEBYTECODE=1

# =================================================================
# SECURITY & AUTHENTICATION
# =================================================================

# JWT secret key for authentication (generate a secure random key)
JWT_SECRET_KEY=your_secure_jwt_secret_key_here

# Session configuration
SESSION_SECRET=your_secure_session_secret_here
SESSION_TIMEOUT=3600

# Encryption key for sensitive data
ENCRYPTION_KEY=your_encryption_key_here

# API authentication
API_KEY_REQUIRED=true
API_KEY_HEADER=X-API-Key

# =================================================================
# CORS & NETWORKING
# =================================================================

# CORS allowed origins (update with your frontend URLs)
CORS_ORIGINS=["https://humanoid-robotic-book.vercel.app", "http://localhost:3000", "http://localhost:7860"]

# CORS allowed methods
CORS_METHODS=["GET", "POST", "PUT", "DELETE", "OPTIONS"]

# CORS allowed headers
CORS_HEADERS=["Content-Type", "Authorization", "X-API-Key"]

# =================================================================
# RAG (RETRIEVAL-AUGMENTED GENERATION) CONFIGURATION
# =================================================================

# Text chunking settings
MIN_CHUNK_SIZE=50
MAX_CHUNK_SIZE=1000
CHUNK_OVERLAP=100
TOP_K_RESULTS=10
SIMILARITY_THRESHOLD=0.7
EMBEDDING_BATCH_SIZE=100

# AI model configuration
EMBEDDING_MODEL=embed-english-v3.0
RERANK_MODEL=rerank-english-v3.0
CHAT_MODEL=command-r-plus
EMBEDDING_DIMENSION=1024

# RAG feature toggles
USE_RERANK=true
USE_RAG=true
USE_SEMANTIC_SEARCH=true
USE_HYBRID_SEARCH=true
USE_RERANK_CACHE=true

# Advanced retrieval settings
MAX_CONTEXT_TOKENS=4000
CONTEXT_OVERLAP_RATIO=0.2
RETRIEVAL_STRATEGY=semantic  # Options: semantic, hybrid, keyword
RERANK_TOP_K=5

# Content processing
BOOK_CONTENT_DIR=book_content
SUPPORTED_FILE_TYPES=[".md", ".txt", ".pdf", ".docx", ".html"]
MAX_FILE_SIZE_MB=50
AUTO_INGEST_ON_STARTUP=false
INGESTION_BATCH_SIZE=50

# Document processing settings
CHUNK_STRATEGY=sentence  # Options: sentence, paragraph, recursive
PRESERVE_FORMATTING=true
EXTRACT_METADATA=true
ENABLE_OCR=true  # For PDFs and images

# =================================================================
# PERFORMANCE & CACHING
# =================================================================

# Logging configuration
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_FILE=logs/app.log
LOG_MAX_SIZE=10MB
LOG_BACKUP_COUNT=5
LOG_ROTATION=daily
LOG_COMPRESSION=gzip

# Rate limiting
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=60
RATE_LIMIT_STRATEGY=sliding_window
RATE_LIMIT_HEADERS=true

# Caching configuration
ENABLE_EMBEDDING_CACHE=true
ENABLE_RESPONSE_CACHE=true
ENABLE_RERANK_CACHE=true
CACHE_MAX_SIZE=10000
CACHE_TTL=3600
CACHE_BACKEND=memory  # Options: memory, redis, memcached
REDIS_URL=redis://localhost:6379/0

# Memory and performance
MAX_CONCURRENT_REQUESTS=50
REQUEST_TIMEOUT=30
EMBEDDING_TIMEOUT=60
RERANK_TIMEOUT=10
ASYNC_WORKERS=4
KEEP_ALIVE=2

# Vector database performance
QDRANT_BATCH_SIZE=100
QDRANT_PARALLEL_REQUESTS=4
QDRANT_CONNECTION_POOL_SIZE=10
QDRANT_PREFERRED_GRPC_PORT=6334

# =================================================================
# MONITORING & HEALTH
# =================================================================

# Health check configuration
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_ENDPOINT=/api/v1/health
HEALTH_CHECK_DEPS=true

# Metrics collection
ENABLE_METRICS=true
METRICS_PORT=9090
METRICS_PATH=/metrics
PROMETHEUS_ENABLED=true

# Error tracking
# SENTRY_DSN=your_sentry_dsn_here
# SENTRY_ENVIRONMENT=production
# SENTRY_TRACES_SAMPLE_RATE=0.1

# Application Performance Monitoring (APM)
# DATADOG_API_KEY=your_datadog_key
# DATADOG_APP_KEY=your_datadog_app_key
# DATADOG_ENV=production

# OpenTelemetry
# OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317
# OTEL_SERVICE_NAME=robotics-book-rag
# OTEL_RESOURCE_ATTRIBUTES=service.version=1.0.0

# Jaeger tracing
# JAEGER_ENDPOINT=http://localhost:14268/api/traces
# JAEGER_SERVICE_NAME=robotics-book-rag

# =================================================================
# RAILWAY DEPLOYMENT SPECIFIC
# =================================================================

# Railway deployment configuration (REQUIRED for Railway)
ROOT_DIRECTORY=backend

# Railway deployment settings
PORT=7860
RAILWAY_ENVIRONMENT=production
RAILWAY_PROJECT_NAME=humanoid-robotics-book

# Railway service scaling
RAILWAY_SERVICE_NAME=chatbot-api
RAILWAY_SERVICE_MEMORY=512
RAILWAY_SERVICE_CPU=0.25
RAILWAY_MIN_INSTANCES=1
RAILWAY_MAX_INSTANCES=3

# Railway build configuration
RAILWAY_BUILD_COMMAND= pip install -r requirements.txt
RAILWAY_START_COMMAND= gunicorn --bind 0.0.0.0:$PORT --workers 4 --worker-class uvicorn.workers.UvicornWorker main:app

# Railway volumes (for Qdrant data persistence)
# RAILWAY_VOLUME_NAME=qdrant-data
# RAILWAY_VOLUME_MOUNT_PATH=/qdrant/storage

# =================================================================
# DATABASE CONFIGURATION (OPTIONAL)
# =================================================================

# PostgreSQL database (for user data, chat history, etc.)
# DATABASE_URL=postgresql://user:password@localhost:5432/robotics_book
# DATABASE_POOL_SIZE=10
# DATABASE_MAX_OVERFLOW=20
# DATABASE_POOL_TIMEOUT=30
# DATABASE_POOL_RECYCLE=3600

# Redis caching and session storage
REDIS_URL=redis://localhost:6379/0
REDIS_DB=0
REDIS_PASSWORD=your_redis_password
REDIS_MAX_CONNECTIONS=20
REDIS_SOCKET_TIMEOUT=5

# MongoDB (alternative for document storage)
# MONGODB_URL=mongodb://localhost:27017/robotics_book
# MONGODB_DATABASE=robotics_book
# MONGODB_COLLECTION=documents

# Elasticsearch (for full-text search)
# ELASTICSEARCH_URL=http://localhost:9200
# ELASTICSEARCH_INDEX=robotics_book
# ELASTICSEARCH_USERNAME=elastic
# ELASTICSEARCH_PASSWORD=changeme

# =================================================================
# EXTERNAL INTEGRATIONS (OPTIONAL)
# =================================================================

# Google Analytics
# GOOGLE_ANALYTICS_ID=GA_MEASUREMENT_ID

# Webhook configuration
# WEBHOOK_URL=https://your-webhook-endpoint.com/webhook
# WEBHOOK_SECRET=your_webhook_secret

# Third-party APIs
# WEATHER_API_KEY=your_weather_api_key
# NEWS_API_KEY=your_news_api_key

# =================================================================
# FEATURE FLAGS
# =================================================================

# Core features
ENABLE_CHATBOT=true
ENABLE_RAG_SYSTEM=true
ENABLE_DOCUMENT_UPLOAD=true
ENABLE_USER_AUTHENTICATION=false

# Advanced features
ENABLE_STREAMING_RESPONSES=true
ENABLE_CONTEXT_AWARENESS=true
ENABLE_PERSONALIZATION=false
ENABLE_ANALYTICS=true
ENABLE_A_B_TESTING=false

# Experimental features
ENABLE_MULTI_MODAL=false
ENABLE_VOICE_INPUT=false
ENABLE_REAL_TIME_COLLABORATION=false

# =================================================================
# DEVELOPMENT & TESTING
# =================================================================

# Mock mode for testing without API keys
USE_MOCK_RESPONSES=false

# Test configuration
USE_TEST_DATA=false
TEST_DATA_PATH=./tests/fixtures/
MOCK_QDRANT=false
MOCK_COHERE=false

# Development databases
DEV_DATABASE_URL=sqlite:///dev.db
DEV_REDIS_URL=redis://localhost:6379/1

# Debug settings
DEBUG_SQL=false
DEBUG_REQUESTS=false
VERBOSE_LOGGING=false
PROFILING_ENABLED=false

# Development tools
ENABLE_SWAGGER_UI=true
ENABLE_RELOAD=true
ENABLE_DEBUG_TOOLBAR=false